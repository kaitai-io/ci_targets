// Code generated by kaitai-struct-compiler from a .ksy source file. DO NOT EDIT.

package test_formats

import (
	"github.com/kaitai-io/kaitai_struct_go_runtime/kaitai"
	"bytes"
)

type SwitchRepeatExpr struct {
	Code uint8
	Size uint32
	Body []interface{}
	_io *kaitai.Stream
	_root *SwitchRepeatExpr
	_parent kaitai.Struct
	_raw_Body [][]byte
}
func NewSwitchRepeatExpr() *SwitchRepeatExpr {
	return &SwitchRepeatExpr{
	}
}

func (this SwitchRepeatExpr) IO_() *kaitai.Stream {
	return this._io
}

func (this *SwitchRepeatExpr) Read(io *kaitai.Stream, parent kaitai.Struct, root *SwitchRepeatExpr) (err error) {
	this._io = io
	this._parent = parent
	this._root = root

	tmp1, err := this._io.ReadU1()
	if err != nil {
		return err
	}
	this.Code = tmp1
	tmp2, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.Size = uint32(tmp2)
	for i := 0; i < int(1); i++ {
		_ = i
		switch (this.Code) {
		case 17:
			tmp3, err := this._io.ReadBytes(int(this.Size))
			if err != nil {
				return err
			}
			tmp3 = tmp3
			this._raw_Body = append(this._raw_Body, tmp3)
			_io__raw_Body := kaitai.NewStream(bytes.NewReader(this._raw_Body[i]))
			tmp4 := NewSwitchRepeatExpr_One()
			err = tmp4.Read(_io__raw_Body, this, this._root)
			if err != nil {
				return err
			}
			this.Body = append(this.Body, tmp4)
		case 34:
			tmp5, err := this._io.ReadBytes(int(this.Size))
			if err != nil {
				return err
			}
			tmp5 = tmp5
			this._raw_Body = append(this._raw_Body, tmp5)
			_io__raw_Body := kaitai.NewStream(bytes.NewReader(this._raw_Body[i]))
			tmp6 := NewSwitchRepeatExpr_Two()
			err = tmp6.Read(_io__raw_Body, this, this._root)
			if err != nil {
				return err
			}
			this.Body = append(this.Body, tmp6)
		default:
			tmp7, err := this._io.ReadBytes(int(this.Size))
			if err != nil {
				return err
			}
			tmp7 = tmp7
			this._raw_Body = append(this._raw_Body, tmp7)
		}
	}
	return err
}
type SwitchRepeatExpr_One struct {
	First []byte
	_io *kaitai.Stream
	_root *SwitchRepeatExpr
	_parent *SwitchRepeatExpr
}
func NewSwitchRepeatExpr_One() *SwitchRepeatExpr_One {
	return &SwitchRepeatExpr_One{
	}
}

func (this SwitchRepeatExpr_One) IO_() *kaitai.Stream {
	return this._io
}

func (this *SwitchRepeatExpr_One) Read(io *kaitai.Stream, parent *SwitchRepeatExpr, root *SwitchRepeatExpr) (err error) {
	this._io = io
	this._parent = parent
	this._root = root

	tmp8, err := this._io.ReadBytesFull()
	if err != nil {
		return err
	}
	tmp8 = tmp8
	this.First = tmp8
	return err
}
type SwitchRepeatExpr_Two struct {
	Second []byte
	_io *kaitai.Stream
	_root *SwitchRepeatExpr
	_parent *SwitchRepeatExpr
}
func NewSwitchRepeatExpr_Two() *SwitchRepeatExpr_Two {
	return &SwitchRepeatExpr_Two{
	}
}

func (this SwitchRepeatExpr_Two) IO_() *kaitai.Stream {
	return this._io
}

func (this *SwitchRepeatExpr_Two) Read(io *kaitai.Stream, parent *SwitchRepeatExpr, root *SwitchRepeatExpr) (err error) {
	this._io = io
	this._parent = parent
	this._root = root

	tmp9, err := this._io.ReadBytesFull()
	if err != nil {
		return err
	}
	tmp9 = tmp9
	this.Second = tmp9
	return err
}
