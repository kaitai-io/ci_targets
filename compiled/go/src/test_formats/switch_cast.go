// Code generated by kaitai-struct-compiler from a .ksy source file. DO NOT EDIT.

package test_formats

import "github.com/kaitai-io/kaitai_struct_go_runtime/kaitai"

type SwitchCast struct {
	Opcodes []*SwitchCast_Opcode
	_io *kaitai.Stream
	_root *SwitchCast
	_parent kaitai.Struct
	_f_errCast bool
	errCast *SwitchCast_Strval
	_f_firstObj bool
	firstObj *SwitchCast_Strval
	_f_secondVal bool
	secondVal uint8
}
func NewSwitchCast() *SwitchCast {
	return &SwitchCast{
	}
}

func (this SwitchCast) IO_() *kaitai.Stream {
	return this._io
}

func (this *SwitchCast) Read(io *kaitai.Stream, parent kaitai.Struct, root *SwitchCast) (err error) {
	this._io = io
	this._parent = parent
	this._root = root

	for i := 0;; i++ {
		tmp1, err := this._io.EOF()
		if err != nil {
			return err
		}
		if tmp1 {
			break
		}
		tmp2 := NewSwitchCast_Opcode()
		err = tmp2.Read(this._io, this, this._root)
		if err != nil {
			return err
		}
		this.Opcodes = append(this.Opcodes, tmp2)
	}
	return err
}
func (this *SwitchCast) ErrCast() (v *SwitchCast_Strval, err error) {
	if (this._f_errCast) {
		return this.errCast, nil
	}
	this._f_errCast = true
	this.errCast = this.Opcodes[2].Body.(*SwitchCast_Strval)
	return this.errCast, nil
}
func (this *SwitchCast) FirstObj() (v *SwitchCast_Strval, err error) {
	if (this._f_firstObj) {
		return this.firstObj, nil
	}
	this._f_firstObj = true
	this.firstObj = this.Opcodes[0].Body.(*SwitchCast_Strval)
	return this.firstObj, nil
}
func (this *SwitchCast) SecondVal() (v uint8, err error) {
	if (this._f_secondVal) {
		return this.secondVal, nil
	}
	this._f_secondVal = true
	this.secondVal = uint8(this.Opcodes[1].Body.(*SwitchCast_Intval).Value)
	return this.secondVal, nil
}
type SwitchCast_Intval struct {
	Value uint8
	_io *kaitai.Stream
	_root *SwitchCast
	_parent *SwitchCast_Opcode
}
func NewSwitchCast_Intval() *SwitchCast_Intval {
	return &SwitchCast_Intval{
	}
}

func (this SwitchCast_Intval) IO_() *kaitai.Stream {
	return this._io
}

func (this *SwitchCast_Intval) Read(io *kaitai.Stream, parent *SwitchCast_Opcode, root *SwitchCast) (err error) {
	this._io = io
	this._parent = parent
	this._root = root

	tmp3, err := this._io.ReadU1()
	if err != nil {
		return err
	}
	this.Value = tmp3
	return err
}
type SwitchCast_Opcode struct {
	Code uint8
	Body kaitai.Struct
	_io *kaitai.Stream
	_root *SwitchCast
	_parent *SwitchCast
}
func NewSwitchCast_Opcode() *SwitchCast_Opcode {
	return &SwitchCast_Opcode{
	}
}

func (this SwitchCast_Opcode) IO_() *kaitai.Stream {
	return this._io
}

func (this *SwitchCast_Opcode) Read(io *kaitai.Stream, parent *SwitchCast, root *SwitchCast) (err error) {
	this._io = io
	this._parent = parent
	this._root = root

	tmp4, err := this._io.ReadU1()
	if err != nil {
		return err
	}
	this.Code = tmp4
	switch (this.Code) {
	case 73:
		tmp5 := NewSwitchCast_Intval()
		err = tmp5.Read(this._io, this, this._root)
		if err != nil {
			return err
		}
		this.Body = tmp5
	case 83:
		tmp6 := NewSwitchCast_Strval()
		err = tmp6.Read(this._io, this, this._root)
		if err != nil {
			return err
		}
		this.Body = tmp6
	}
	return err
}
type SwitchCast_Strval struct {
	Value string
	_io *kaitai.Stream
	_root *SwitchCast
	_parent *SwitchCast_Opcode
}
func NewSwitchCast_Strval() *SwitchCast_Strval {
	return &SwitchCast_Strval{
	}
}

func (this SwitchCast_Strval) IO_() *kaitai.Stream {
	return this._io
}

func (this *SwitchCast_Strval) Read(io *kaitai.Stream, parent *SwitchCast_Opcode, root *SwitchCast) (err error) {
	this._io = io
	this._parent = parent
	this._root = root

	tmp7, err := this._io.ReadBytesTerm(0, false, true, true)
	if err != nil {
		return err
	}
	this.Value = string(tmp7)
	return err
}
